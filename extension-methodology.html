---
layout: default
slug:   extension-methodology
title:  INSPIRE data specification extensions - The Extension Methodology
---
<section>

    <h2>The Extension Methodology</h2>

    <p>In this section, we'll explain step by step how you can design and implement a data model that re-uses INSPIRE data
        specifications. We will focus on the methodological aspects, not on steps in concrete tools. You'll find an
        example of how to use tools in the <a href="/tutorial.html" target="_blank">End-to-End Tutorial Project</a>.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>This section assumes you have basic knowledge of the <a href="/inspire-mda.html#glossary" target="_blank">terms and concepts</a> used in INSPIRE.</td>
        </tr>
    </table>

    <h2><a name="process" id="process" href="#process"></a>Process Phases</h2>

    <p>In your daily work, you will be confronted with requirements to use standardized data in order to fulfil a certain task. Such requirements often have a legal foundation, such as a European directive that requires monitoring and reporting. Examples for reporting directives include the Air Quality directive and the Marine directive. National legislation also often requires standardisation. As an example, the new Spatial Planning Act in the Netherlands mandates interoperability. </p>
    <p>Even when no legal foundation requires the use of standards, building on interoperable data can yield huge efficiency gains. With the INSPIRE framework, you have a great starting point to develop interoperable infrastructures that fully cover your organisation's use cases. That is when extending INSPIRE is the way forward.</p>

    <p>This section gives you an overview of the whole process, which has six main phases:</p>

    <ol>
        <li><strong>Organise:</strong> Build your working group, define your process and discuss work agreements</li>
        <li><strong>Analyse:</strong> Identify and analyse requirements, evaluate existing models and the INSPIRE data specifications, prioritize work</li>
        <li><strong>Compare:</strong> Compare the requirements with existing models and your work in progress model extension </li>
        <li><strong>Design:</strong> Create or modify your model extension </li>
        <li><strong>Validate:</strong> Test and validate the model extension through implementation on the target platform, data integration, and usage</li>
        <li><strong>Operate:</strong> Deploy and operate the model extension in view and download services</li>
    </ol>

    <p>You will iterate over all of these phases multiple times. Typically, iterations that include a release will take weeks, while iterations where you design and implement features will take only minutes, hours or at most weeks:</p>

    <div style="margin: 20px">
        <img src="/images/process-overview.png" title="Overview of the extension methodology" style="width: 60%; min-width: 400px; margin-left: 20%; margin-right: 20%">
    </div>

    <h2><a name="organisation" id="organisation" href="#organisation"></a>Organisation and Working Agreements</h2>

    <p>First of all, you need to get organised. This means understanding who should be on the working group,
        distributing roles and responsibilities, setting work agreements, choosing tools, and more aspects. Let's start
        with you.</p>

    <h3>Who are you?</h3>

    <p>You will be the facilitator for the team that will design and
        implement the model. As you are hopefully not working alone, you do not need to be an expert at all required
        skills, but you should have the following skills:</p>
    <ol>
        <li>You have very good understanding of the domain the model should cover</li>
        <li>You understand basic modelling concepts such as classes and properties</li>
        <li>You are a good technical writer who writes concise, easy to understand prose</li>
        <li>You are a good moderator</li>
    </ol>

    <h3>Your Team</h3>

    <p>Any data harmonisation projects needs people with a wide range of skills. A typical team size is 3-10 people, though larger teams occasionally form to define a model. When you build your team, make sure to have the following profiles on board:</p>

    <ol>
        <li><strong>Domain Experts</strong>: These people, like you, are experts in the domain to be modelled and know it well from years of hands-on work. They are familiar with the specific shared terminology, but every one provides a different perspective, e.g. from research and from data collection.</li>
        <li><strong>Standards and Modelling Expert</strong>: This person knows ISO, OGC and ideally INSPIRE standards well and has very good knowledge of at least one schema language.</li>
        <li><strong>Integration Expert</strong>: This person will help you to integrate actual data into the new model, by using data transformation tools such as XSLT, <a href="http://www.safe.com/fme" target="_blank">FME</a> or <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio (Open Source)</a>.</li>
        <li><strong>Technical Expert</strong>: This person knows all about specific tools used in the process, such as model transformation tools, modelling tools, databases and service publishing frameworks. Typically, they support many projects and support your activity part-time.</li>
        <li><strong>Supporting Stakeholder</strong>: This person has organisational and political influence and supports the project by providing required resources.</li>
    </ol>

    <div style="margin: 20px">
        <img src="/images/team.png" title="Overview of the extension methodology" style="width: 80%; min-width: 400px; margin-left: 10%; margin-right: 10%">
    </div>

    <h3>Work Agreements</h3>

    <p>Whenever you collaborate with a team, you need to clearly define the rules under which you will cooperate up-front. In agile software development, we call these rules work agreements. You should consider the following areas for work agreements:</p>

    <ul>
        <li><strong>Roles:</strong> Does everybody in the team have the same responsibilities? Is one person responsible for monitoring the process and improving it, like a <a href="https://en.wikipedia.org/wiki/Scrum_%28software_development%29#Scrum_master" target="_blank">SCRUM master</a>?</li>
        <li><strong>Iterations:</strong> How long will your development iterations be? How many iterations will you go through in the team? How many limited or public releases will you make to gather feedback from outside the team?</li>
        <li><strong>Documentation:</strong> How will you document the model itself, the process you're following and the decisions made during the project? Will others be able to use this documentation to emulate what you did?</li>
        <li><strong>Capacity Building:</strong> How will you actively increase the capacity of your team? Will you identify skill deficits and address them through trainings or through pulling in advisors (internal or external)?</li>
        <li><strong>Natural Language usage:</strong> Will you develop the model in English or in your local language? Will you provide translations?</li>
        <li><strong>Meetings:</strong> How often will you be able to meet in person or online? How do you get the most our of such meetings?</li>
        <li><strong>Communication:</strong> How often will you be able to meet in person or online? How do you get the most our of such meetings? How do you communicate asynchronously?</li>
        <li><strong>Change Management:</strong> How will you deal with external changes, such as new INSPIRE data specification versions, new version of regional standards, or a change in your technical requirements?</li>
        <li><strong>Time and commitment:</strong> How long will the project go? What level of commitment will you get from each of the involved team members?</li>
    </ul>

    <h3>Tools</h3>

    <p>It's also helpful to agree on a set of tools that everybody uses, to reduce interoperability challenges inside the team. Take into account previous experience, available licenses and suitability for the project at hand. Typically, you will need the following types of tools:</p>

    <ul>
        <li><strong>Project Management</strong>: A place where you track tasks, progress, documents and other artifacts related to the project. It should be easy to access and to use. Typical products used for this purpose include <a href="https://en.atlassian.com/software/jira" target="_blank">Jira</a>, <a href="http://www.redmine.org/" target="_blank">Redmine (Open Source)</a> or <a href="https://github.com/" target="_blank">Github</a> and <a href="https://about.gitlab.com/" target="_blank">Gitlab</a>.</li>
        <li><strong>Communication</strong>: A central place for all communication can be incredibe helpful for documentaiton and understanding how a project developed. This archive should be searchable and easily accessible. Typical choices include a mailing list, or tools like <a href="https://hipchat.com/" target="_blank">HipChat</a> or <a href="https://slack.com/" target="_blank">Slack</a>.</li>
        <li><strong>Source Code Management</strong>: You will benefit greatly from using a proper source and version control repository for your model from the start on. Such tools enable effective cooperation even in larger or distributed teams and allow you to review progress, and they have become much easier to use thanks to sites like Github. The three most common tools are <a href="https://www.mercurial-scm.org/" target="_blank">Mercurial</a>, <a href="https://git-scm.com/" target="_blank">Git</a> and <a href="https://subversion.apache.org/" target="_blank">Subversion (SVN)</a>. Which one you use will depend on the modelling software you use.</li>
        <li><strong>Data Modelling</strong>: The tool you use to design the actual model extension. Typically, this is a UML Editor such as <a href="http://www.sparxsystems.com.au/" target="_blank">Enterprise Architect</a> or <a href="http://argouml.tigris.org/" target="_blank">ArgoUML (Open Source)</a>. In case you need only an XML Schema, you can create the XML schema in any programmer's text editor. There is also specialized software available such as <a href="http://www.altova.com/xmlspy.html" target="_blank">XMLSpy</a>.</li>
        <li><strong>Schema Transformation</strong>: When you design your model in a conceptual language like UML, you need to transform it to an implementation language before you can actually use it. While many of the data modelling tools listed before have such capabilities, you will likely need a schema transformation tool as well. For geospatial schemas, there is one specific solution: <a href="http://shapechange.net/" target="_blank">ShapeChange (Open Source)</a>.</li>
        <li><strong>Data Transformation</strong>: Your model under design needs to be tested, and that can only be done meaningfully by filling it with data. This process, also known as transformation testing, is done with data transformation software, sometimes also called ETL (Extract Transform Load). The most commonly used products for this purpose are <a href="https://en.wikipedia.org/wiki/XSLT" target="_blank">XSLT</a>, <a href="http://www.safe.com/fme" target="_blank">FME</a> and <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio (Open Source)</a>.</li>
        <li><strong>Service Publishing</strong>: At the end, a successful INSPIRE implementation requires you to set up view and download services, and you will need to test your model extension by deploying such services. There are several options available for publishing INSPIRE compliant services, such as <a href="http://www.deegree.org/" target="_blank">deegree (Open Source)</a>, <a href="http://docs.geoserver.org/stable/en/user/data/app-schema/" target="_blank">GeoServer with app-schema (Open Source)</a> and <a href="http://www.interactive-instruments.de/xtraserver/" target="_blank">ArcGIS Server with XtraServer</a>.</li>
        <li><strong>A GIS client</strong>: You will use this software to analyse both the source data and transformed data. Since INSPIRE uses <em>complex feature GML</em> as a base, it is challenging to use in desktop GIS. Some GIS software does have limited complex features GML support, such as <a href="https://www.qgis.org" target="_blank">QGIS (Open Source)</a>.</li>
    </ul>

    <h2><a name="analysis" id="analysis" href="#analysis"></a>Requirements Analysis</h2>

    <p>After getting organised, it is time to scope the project in detail and to decide what exactly needs to be done in which order. The core activities in this phase revolve around the identification and analysis of requirements. The objective of the analysis is to understand how the model will be used by its future stakeholders and what they really require. You will also define metrics that you can use to measure progress during the project, and to assess successful completion. We recommend a structured user-centered approach to the analysis, with the following steps:</p>

    <ol>
        <li>Scope Analysis</li>
        <li>Stakeholder Identification and Persona building</li>
        <li>Scenarios</li>
        <li>User Stories</li>
        <li>Technical Requirements</li>
    </ol>

    <p>Personas, scenarios and user stories are all related to each other, and help getting a clearly motivated, consistent picture of the requirements, without getting lost in details too early in the process:</p>

    <div style="margin: 20px">
        <img src="/images/user-analysis.png" title="The relation between Personas, Scenarios and User Stories" style="width: 60%; min-width: 400px; margin-left: 20%; margin-right: 20%">
    </div>

    <p>The following sections will explain how to work with these to define a fit for purpose data model.</p>

    <h3>Scope Analysis</h3>

    <p>In a first step, write down the trigger use case that initiated the process. Try to describe the full case without going into the details. Then, gather all relevant documents that define what you need to do. These might be legal texts such as implementation regulations, or technical texts created by specialist departments. If there are no texts to draw upon, ask each of the domain experts in your team to describe their current or envisaged workflows in detail, similar to the <a href="#scenarios">scenario</a> described below.</p>

    <p>To identify statements relevant for your data model, perform a so-called <em>Lexical Analysis</em>. Find <strong>nouns</strong> that describe spatial objects or their properties in their story telling and the documents gathered. Clearly mark what is required and what is optional. Consider the following example, where all relevant nouns are marked bold:</p>

    <blockquote>The responsibility for registering applications relating to land rights including <strong>ownership</strong>, <strong>mortgages</strong>, <strong>burdens</strong> and <strong>easements</strong> rests with the Land Registry...</blockquote>

    <p>In the end of this process, you should have a list of data elements you will need to include in your model. The next step is sort this list, so that the most important and high-business-value items are at the top of the list. This list &ndash; often also called a <strong>backlog</strong> -&ndash; could look like this:</p>

    <ul>
        <li>
            Object type: Ownership Registration
            <ul>
                <li>Property: Date of submission</li>
                <li>Property: Submitting legal entity</li>
                <li>Property: Owner legal entity</li>
            </ul>
        </li>
        <li>
            Object type: Mortgage
            <ul>
                <li>Property: Date of submission</li>
                <li>Property: Submitting legal entity</li>
                <li>Property: Land record Identifier</li>
                <li>Property: Additional securities</li>
            </ul>
        </li>
    </ul>

    <h3>Personas</h3>

    <p>One of the first steps to build a model extension is to identify its future stakeholders. Who will be working directly with data in that model? Who will be affected by analysis and decisions made on that data model? Make a list of the individuals you know that are going to be directly or indirectly affected by your work. Group them by function, skills and needs. Then, build between one and three so-called <em>personas</em> based on the most important stakeholder groups. A  persona defines an archetypical user of your data model. The idea is that if you want to design effective systems, they need to be designed for specific people. In other words, personas represent fictitious people which are based on your knowledge of real users. Here is an example persona:</p>

    <ul>
        <li><strong>Name:</strong> Angela Müller</li>
        <li><strong>Position:</strong> Team Lead Geoinformation for the County Müllerhausen</li>
        <li><strong>Education:</strong> M.Sc. Geography</li>
        <li><strong>Technical Knowledge:</strong> ArcGIS (+++), Excel (+), Word (+), JIRA (+), Git (+), Python (++), UML (+)</li>
    </ul>

    <h3><a name="scenarios" id="scenarios" href="#scenarios"></a>Scenarios</h3>

    <p>A scenario is a narrative that tells how one specific persona will work with the data. The scenario also explains why that persona executes the workflow. It explains one specific workflow, without variants, from end to end, and uses the persona's vocabulary. The scenario should contain at least some of the object types and properties you have identified in the scope analysis. Consider this example scenario:</p>

    <blockquote>
        Angela needs to publish an updated version of the Ownership Registrations data set she is responsible for, because her colleague Mark needs the new data which contains additional information on submitters to implement a new and improved internal administrative process. She logs in to the system, goes to the data sets list, identifies the one she wants to update, and clicks on it. She goes to the files tab and deletes all files, then uploads the new files. She waits for a moment until the system tells her all files are valid, then the proceeds with metadata entry. After that is done, she triggers the service update. She notifies her colleague Mark.
    </blockquote>

    <h3>User Stories</h3>

    <p>A <a href="https://en.wikipedia.org/wiki/User_story" target="_blank">User Story</a> describes the "who", "what" and "why" of a requirement to a software system in a simple, concise way. It may consist of one or more sentences in the language of the end user. User stories originate from agile software development methodologies as the basis for defining the functions a business system must provide. A simple example for a user story is:</p>

    <blockquote>As a data manager, I <em>must</em> be able to upload a GML file to create a predefined dataset download service.</blockquote>

    <p>This single sentence identifies the actor (stakeholder), what they need to do (upload a file) and gives the reason why the functionality is required. The sentence also contains a key word that indicates the business value of the requirement. In the example, it's <em>must</em>, the strongest of the three keywords commonly used, the other two being <em>should</em> and <em>could</em>. User stories can also serve you well when creating a data model, such as in this example:</p>

    <blockquote>As a data manager, I must be able to combine multiple land parcels into one land parcel, without loosing records of the individual parcels.</blockquote>

    <p>This requirement provides a basis for several elements of your data model. A solution to implement this requirement might be to add a class <code>JoinedParcel</code> to manage parcel joins, and to give it a reference to a <code>Set</code> of <code>Parcels</code>, to satisfy this requirement.</p>

    <p>A User Story is often more than just a single sentence. Often, the user story needs to be clarified with additional information, such as...:</p>

    <ul>
        <li><strong>Unique Identifier:</strong> A short ID and/or description we can use to reference to the use case, such as &laquo;IE-12 Join Parcels&raquo;.</li>
        <li><strong>Definition of Done (DoD):</strong> A single sentence leaves a lot open to interpretation. The DoD is used to define exactly when the user story is fulfilled. In the GML upload example above, the DoD might read that GML 2.1.x and GML 3.x need to be supported, that files up to 100MB need to be uploaded, and that the system needs to validate files on upload. You can even specify a set of files with which the upload has to work.</li>
        <li><strong>Design:</strong> In some cases, the user story will need a design, e.g. for a user interface or for a data model. Often this design is a draft or a wireframe, not a pixel-perfect final design.</li>
        <li><strong>Preconditions:</strong> Describes the state the system needs to be in before the action. Typical preconditions include authentication or execution of a successful process.</li>
        <li><strong>Postconditions:</strong> Describes the expected output of the action, such as a newly created file being provided to the user for download.</li>
    </ul>

    <h2><a name="comparison" id="comparison" href="#comparison"></a>Comparison with INSPIRE and other Data Specifications</h2>

    <p>Your User Stories, by intent, don't describe the actual data model in detail. If you first create a data model based on the user stories and then compare your model to the INSPIRE data specification, you will have a much harder time to reconcile the two. Instead, we compare the INSPIRE data specification to the User Stories and see which parts of it are already covered.

    <h3>Find your INSPIRE Scope</h3>

    <p>You have three options to understand which INSPIRE Data Specifications are relevant for your model extension. Initially, interested people had to either read through hundreds of pages of PDFs, or to analyse the Enterprise Architect UML files. Thanks to the hard work of the IES team at the JRC, we now have a third option available. The <a href="http://inspire-regadmin.jrc.ec.europa.eu/dataspecification/" target="_blank">INSPIRE Interactive Data Specifications</a>. This online application provides two tools:</p>

    <ol>
        <li><strong>Read and Compare Technical Guidelines:</strong> An index that present the Data Specifications in smaller chunks, and enables side-by-side comparison of different themes. This is useful when you want to determine which data specification is relevant.</li>
        <li><strong>Find Your Scope:</strong> An interactive workflow to identify relevant Spatial Object types in the INSPIRE Data Specifications. You can use this to find out which INSPIRE Data Specifications are relevant for a dataset you’d like to contribute to the infrastructure. The &laquo;Find your Scope&raquo; tool at the end provides you with either documentation (*.doc, *.pdf), a mapping table (*.xls), or as a hale studio mapping project. This project makes it easier for you to get started with producing INSPIRE interoperable data.</li>
    </ol>

    <div style="margin: 20px">
        <img src="/images/find-your-scope.png" title="INSPIRE Find Your Scope tool" style="width: 80%; min-width: 400px; margin-left: 10%; margin-right: 10%">
    </div>

    <p>These tools will help you identify which themes, schemas and spatial object types are relevant for your model extension. Export the list of relevant object types as a document and a mapping table for later work.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>Make sure you also take a look at the <a href="/inspire-mda.html#glossary" target="_blank">Model Extensions Inventory</a> to see if there is an extension you can re-use entirely or use as a blueprint for your work.</td>
        </tr>
    </table>

    <h3>Validate requirements coverage</h3>

    <p>Let's pick up the example from above again and compare that to the <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_CP_v3.0.pdf" target="_blank">INSPIRE Cadastral Parcels data specification</a>. In that specification, you'll find this diagram:</p>

    <div style="margin: 20px">
        <img src="/images/inspire-cadastral-parcels.png" title="INSPIRE cadastral parcels UML diagram" style="max-width: 752px; width: 90%; min-width: 400px; margin-left: 5%; margin-right: 5%">
    </div>

    <p>Looking at the data model in detail, there doesn't seem to be a way to cover the parcel join use case with the given data structure. We do however have a <code>CadastralParcel</code> class that might serve as a baseline and connection point to the INSPIRE model. Compare each of your User Stories to the INSPIRE data specification, and build a comparison table similar to this one:</p>

    <table class="table table-responsive table-striped">
        <tr>
            <th>User Story</th>
            <th>Covered</th>
            <th>Not covered</th>
        </tr>
        <tr>
            <td>IE-12 Join Parcels</td>
            <td>The local class Parcel can be matched to the INSPIRE class CadastralParcel. We can use beginLifespan and endLifespan properties to indicate when a JoinedParcel is formed, and when the individual Parcels stopped existing as individual objects.</td>
            <td>The INSPIRE class CadastralParcel has no reference to a set of CadastralParcels that it was made of.</td>
        </tr>
        <tr>
            <td>IE-14 Split Parcels</td>
            <td>The local class Parcel can be matched to the INSPIRE class CadastralParcel. We can use beginLifespan and endLifespan properties to indicate when a new Parcel is formed, and when the individual Parcels stopped existing as individual objects.</td>
            <td>The INSPIRE class CadastralParcel has no reference to a CadastralParcel of which it was split off.</td>
        </tr>
    </table>

    <p>The table uses tentative class names for the missing classes based on the results of the lexical analysis done earlier. Your class names should follow a common naming convention. In INSPIRE, we use <a href="https://en.wikipedia.org/wiki/CamelCase" target="_blank">CamelCased></a>, singular, composite English class names.</p>

    <h3>Compare with existing models</h3>

    <p>In many cases, you already have one or multiple existing local data models - after all, you have been managing parcels or other geospatial objects in the past. When you have such a local data model, perform the same exercise as before. This time, compare the requirements to the local data model, resulting in a second coverage table.</p>

    <h2><a name="extension" id="extension" href="#extension"></a>Designing the Model Extension</h2>

    <p>Finally, it's time to design the actual data model. For the initial design, we want all domain experts in the group to give equal input. For this reason, you should ask  all domain experts to create a draft design in parallel. You will likely go through several iterations of this draft model very quickly, so use easily accessible tools such as Pen and Paper or whiteboards. UML or XSD editors are best used after the model becomes more stable.</p>

    <p>The design phase has the following steps:</p>

    <ol>
        <li>Choose a <a href="/patterns/index.html#modelPatterns" target="_blank">Model Extension pattern</a> to define how you generally want to reference INSPIRE data specifications in your model</li>
        <li>Create your new Model</li>
        <li>Choose a <a href="/patterns/index.html#classPatterns" target="_blank">Class Extension pattern</a> to define how this new class should be linked to any INSPIRE class</li>
        <li>Create required new classes</li>
        <li>Choose a <a href="/patterns/index.html#propertyPatterns" target="_blank">Property Extension pattern</a> to define how properties in the new class should be linked to any INSPIRE classes or properties</li>
        <li>Add required properties to new classes</li>
    </ol>

    <p>When each of the domain experts has finished their model draft, the next step is to compare and merge model designs. Proceed as follows, with each domain expert going through the following routine:</p>

    <ol>
        <li>The domain expert presents their model draft briefly (one to three minutes)</li>
        <li>Each of the other domain experts provides brief feedback (one minute) on things that should be kept (<em>likes</em>) and things that need to be improved (<em>dislikes</em>)</li>
    </ol>

    <p>After all the domain experts have presented their model, the collected <em>likes</em> and <em>dislikes</em> should form the basis for a second draft model. If there are no major points of contention, the project lead uses the feedback and draft models to build the initial model.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>When you design a large model with more than 8 to 10 new classes, you can improve model organisation by creating <em>packages</em>. Group classes that are closely related together in such packages. To work on such large models, create the draft design and initial model for each of these packages one at a time.</td>
        </tr>
    </table>

    <p>In later iterations, you may reconsider one of the choices made regarding the pattern type. Example: You find that in implementation, a <a href="patterns/index.html#classPatterns" target="_blank">Class Extension</a> pattern you chose creates unexpected problems, so you go back and shift to a different pattern.</p>

    <h2><a name="validation" id="validation" href="#validation"></a>Validation and Integration</h2>

    <p>TODO</p>

    <h2><a name="operation" id="operation" href="#operation"></a>Transition to operational usage</h2>

    <p>TODO</p>


</section>

